library(tidyverse)
#library(ggplot2)

survey <- gsheet::gsheet2tbl('https://docs.google.com/spreadsheets/d/1Ra5LhxdCRbmEp-wV07ZlREDt3gysBgyUG4AWuaa1pzk/edit?usp=sharing')

names(survey) <- c(
  'timestamp', #  "Timestamp", 
  'name', # "What is your name?", 
  'experience', # "How much experience do you have in R?", 
  'soda', # "How many sodas do you drink a week?", 
  'squat', # "How long do you think you can hold a wall squat (seconds)? (ie, the 'imaginary chair')?", 
  'egypt_or_france', # "Would you rather visit the pyramids of Egypt or the Eiffel tower of Paris?", 
  'bike', # "Do you know how to ride a bike?", 
  'swim', # "Do you know how to swim?", 
  'age', # "How old are you in years?", 
  'where', # "Where do you live?", 
  'lng', # "What is the longitude of your hometown?",
  'lat', # "What is the latitude of your hometown?", 
  'language', # "Do you know how to speak another language aside from English?", 
  'height', # "How tall are you in inches?", 
  'shoe', # "What size shoe do you wear? (US Size)", 
  'hand', # "Are you right-handed or left-handed?", 
  'happy', # "How happy do you consider yourself on a scale from 1 to 5, with 1 being extremely unhappy, 5 being extremely happy, and 3 being the average person?", 
  'sing', # "Do you consider yourself better or worse than average at singing?", 
  'pizza_or_love', # "What's more important pizza or love?", 
  'dance', # "Do you consider yourself better than average at dancing?", 
  'sleep', # "How many hours did you sleep last night", 
  'eat', # "Would you rather eat", 
  'adjective', # "What is the one adjective that best describes you?", 
  'teeth', # "How many teeth do you have?", 
  'braces', # "If you had to have braces the rest of your life, which color would you choose?", 
  'siblings', # "How many siblings do you have?", 
  'wrestle', # "Of the people in this room, who would win a pinky wrestle against Michael?", 
  'hangout', # "What is the best place to hang out in Sewanee?", 
  'movies', # "How many movies have you watched in the last month?"
  'dob' # "What is your date of birth?"
)

survey2 <- survey %>% 
  mutate( dob = mdy( dob ),
          age_in_weeks = as.numeric( difftime( Sys.Date(), dob, units = 'weeks') ) )
survey2
#mdy: converts month/date/year datatypes

# module 6!!!

#In order to make a plot we need a piece of paper or a canvas. So let’s make a canvas:
ggplot()
#creates canvas only

#Great! Now let’s make a different kind of plot. First, draw your x axis and your y axis (a.k.a. make your coordinates). Ask yourself: What do I want to see?
ggplot(data = survey2, aes(x = hand))
#aes: aesthetic, what we want to see, properties of datapoints in dataset
#creates title, categories

#Map the data to the coordinates. Here we will map the data to the coordinates using points. Ask yourself: How do I want to show what I want to see?
ggplot(data = survey2, aes(x = hand)) +
  geom_bar()
#geom: how we want to show it

#With your partner, make a bar chart of another survey variable
ggplot(data = survey2, aes(x = egypt_or_france)) +
  geom_bar()

#What if we want to make a scatterplot?
ggplot(data = survey2, aes( x = age, y = height)) +
  geom_point(color = "darkseagreen3")

#What if you want to color code these points? Now you’re choosing what else you want to see and how.
ggplot(data = survey2, aes( x = age, y = height, color = swim)) +
  geom_point()
#color in aes = automatic legend

ggplot(data = survey2, aes( x = age, y = siblings, shape = pizza_or_love, color = pizza_or_love)) +
  geom_point()

ggplot(data = survey2, aes(x = height, y = shoe, color = age)) +
  geom_point() +
  xlim(40, 90) +
  ylim(0,15)
#adding size parameters

#Add some labels. ggplot() automatically added axis titles and a legend, but we can add some more using the labs() function. Let’s add an overhead title, a sub-title, and a caption.
ggplot(data = survey2, aes( x = height, y = shoe, color = experience)) +
  geom_point() +
  labs(x = "Height in Inches", 
       y = "Shoe Size (US)", 
       color = "Experience in R", 
       title = "Shoe Size vs. Height", 
       subtitle = "with R experience", 
       caption = "Datalab 2024")
#adding labels
#use arrow in plots to view previous plots
#use broom to clear all plots in history, in environment to clear all data

library(ggthemes)

#What if we want to make a line graph?
ggplot(data = survey2, aes(x = age, y = happy, color = experience)) +
  geom_point(alpha = 0.2) +
  geom_line() + 
  theme_fivethirtyeight()

# exploring!!!
ggplot(data = survey2, aes(x = height, y = shoe, color = experience)) +
  geom_point() +
  ylim(0,15) + 
  scale_x_continuous(breaks = 50:80) +
  #ratio tied to dataset parameters 
  theme_bw(base_size = 12)

ggplot(data = survey2, aes(x = height, y = shoe, color = experience)) +
  geom_point() +
  ylim(0,15) + 
  scale_x_continuous(breaks = seq(50, 80, by = 5)) +
  theme_bw(base_size = 12)

ggplot(data = survey2, aes(x = height, y = shoe, color = experience)) +
  geom_point() +
  ylim(0,15) + 
  scale_x_continuous(breaks = c(55,70),labels = c("short", "tall")) +
  theme_bw(base_size = 12)

ggplot(data = survey2, aes(x = height, y = shoe, color = experience)) +
  geom_point(alpha = 0.2) +
  geom_line() +
  facet_wrap( ~experience) 
  theme_fivethirtyeight()
#facet_wrap makes a new panel for each type of variable

#We can also make separate plots for a variable by faceting.


#Let’s stylize the plot with a different theme.


#Ready for something different? Let’s make a histogram.


